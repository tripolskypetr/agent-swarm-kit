<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1467.8125 403" style="max-width: 1467.81px; background-color: white;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="my-svg"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#my-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#my-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg p{margin:0;}#my-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#my-svg .cluster-label text{fill:#333;}#my-svg .cluster-label span{color:#333;}#my-svg .cluster-label span p{background-color:transparent;}#my-svg .label text,#my-svg span{fill:#333;color:#333;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .rough-node .label text,#my-svg .node .label text,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .rough-node .label,#my-svg .node .label,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#my-svg .arrowheadPath{fill:#333333;}#my-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#333333;fill:none;}#my-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#my-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#my-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#my-svg .cluster text{fill:#333;}#my-svg .cluster span{color:#333;}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg rect.text{fill:none;stroke-width:0;}#my-svg .icon-shape,#my-svg .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .icon-shape p,#my-svg .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#my-svg .icon-shape rect,#my-svg .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#my-svg .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"/></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><g class="root"><g class="clusters"><g data-look="classic" id="subGraph2" class="cluster"><rect height="104" width="944.046875" y="162" x="8" style=""/><g transform="translate(422.0390625, 162)" class="cluster-label"><foreignObject height="24" width="115.96875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Callback System</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph1" class="cluster"><rect height="104" width="780.96875" y="8" x="161.9609375" style=""/><g transform="translate(470.84375, 8)" class="cluster-label"><foreignObject height="24" width="163.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Tool Management Flow</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph0" class="cluster"><rect height="387" width="487.765625" y="8" x="972.046875" style=""/><g transform="translate(1143.9296875, 8)" class="cluster-label"><foreignObject height="24" width="144"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ClientMCP Structure</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ClientMCP_IMCPParams_0" d="M1347.372,87L1348.173,91.167C1348.975,95.333,1350.577,103.667,1351.378,112C1352.18,120.333,1352.18,128.667,1352.18,137C1352.18,145.333,1352.18,153.667,1352.18,161.333C1352.18,169,1352.18,176,1352.18,179.5L1352.18,183"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ClientMCP_fetchTools_0" d="M1286.652,87L1278.083,91.167C1269.514,95.333,1252.376,103.667,1243.807,112C1235.238,120.333,1235.238,128.667,1235.238,137C1235.238,145.333,1235.238,153.667,1226.477,161.729C1217.716,169.792,1200.194,177.583,1191.433,181.479L1182.671,185.375"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_fetchTools_toolCache_0" d="M1118.297,241L1118.297,245.167C1118.297,249.333,1118.297,257.667,1118.297,266C1118.297,274.333,1118.297,282.667,1118.297,290.333C1118.297,298,1118.297,305,1118.297,308.5L1118.297,312"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_listTools_fetchTools_0" d="M306.384,87L314.183,91.167C321.982,95.333,337.581,103.667,460.712,112C583.844,120.333,814.508,128.667,929.84,137C1045.172,145.333,1045.172,153.667,1050.488,161.614C1055.804,169.561,1066.436,177.121,1071.752,180.902L1077.068,184.682"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_listTools_onList_0" d="M250.651,87L249.85,91.167C249.049,95.333,247.446,103.667,246.645,112C245.844,120.333,245.844,128.667,245.844,137C245.844,145.333,245.844,153.667,245.844,161.333C245.844,169,245.844,176,245.844,179.5L245.844,183"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_updateToolsForClient_fetchTools_0" d="M520.69,87L528.433,91.167C536.176,95.333,551.662,103.667,651.263,112C750.865,120.333,934.581,128.667,1026.439,137C1118.297,145.333,1118.297,153.667,1118.297,161.333C1118.297,169,1118.297,176,1118.297,179.5L1118.297,183"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_updateToolsForClient_onUpdate_0" d="M452.665,87L449.91,91.167C447.156,95.333,441.646,103.667,438.891,112C436.137,120.333,436.137,128.667,436.137,137C436.137,145.333,436.137,153.667,436.137,161.333C436.137,169,436.137,176,436.137,179.5L436.137,183"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_callTool_onCall_0" d="M683.781,87L683.781,91.167C683.781,95.333,683.781,103.667,683.781,112C683.781,120.333,683.781,128.667,683.781,137C683.781,145.333,683.781,153.667,683.781,161.333C683.781,169,683.781,176,683.781,179.5L683.781,183"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_dispose_onDispose_0" d="M851.602,87L851.602,91.167C851.602,95.333,851.602,103.667,851.602,112C851.602,120.333,851.602,128.667,851.602,137C851.602,145.333,851.602,153.667,851.602,161.333C851.602,169,851.602,176,851.602,179.5L851.602,183"/></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(1342.1796875, 60)" id="flowchart-ClientMCP-0" class="node default"><rect height="54" width="132.515625" y="-27" x="-66.2578125" style="" class="basic label-container"/><g transform="translate(-36.2578125, -12)" style="" class="label"><rect/><foreignObject height="24" width="72.515625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ClientMCP</p></span></div></foreignObject></g></g><g transform="translate(1352.1796875, 214)" id="flowchart-IMCPParams-1" class="node default"><rect height="54" width="145.265625" y="-27" x="-72.6328125" style="" class="basic label-container"/><g transform="translate(-42.6328125, -12)" style="" class="label"><rect/><foreignObject height="24" width="85.265625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>IMCPParams</p></span></div></foreignObject></g></g><g transform="translate(1118.296875, 214)" id="flowchart-fetchTools-2" class="node default"><rect height="54" width="222.5" y="-27" x="-111.25" style="" class="basic label-container"/><g transform="translate(-81.25, -12)" style="" class="label"><rect/><foreignObject height="24" width="162.5"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>fetchTools - memoized</p></span></div></foreignObject></g></g><g transform="translate(1118.296875, 343)" id="flowchart-toolCache-3" class="node default"><rect height="54" width="181.5625" y="-27" x="-90.78125" style="" class="basic label-container"/><g transform="translate(-60.78125, -12)" style="" class="label"><rect/><foreignObject height="24" width="121.5625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Tool Cache - Map</p></span></div></foreignObject></g></g><g transform="translate(255.84375, 60)" id="flowchart-listTools-4" class="node default"><rect height="54" width="117.765625" y="-27" x="-58.8828125" style="" class="basic label-container"/><g transform="translate(-28.8828125, -12)" style="" class="label"><rect/><foreignObject height="24" width="57.765625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>listTools</p></span></div></foreignObject></g></g><g transform="translate(470.515625, 60)" id="flowchart-updateToolsForClient-5" class="node default"><rect height="54" width="211.578125" y="-27" x="-105.7890625" style="" class="basic label-container"/><g transform="translate(-75.7890625, -12)" style="" class="label"><rect/><foreignObject height="24" width="151.578125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>updateToolsForClient</p></span></div></foreignObject></g></g><g transform="translate(683.78125, 60)" id="flowchart-callTool-6" class="node default"><rect height="54" width="114.953125" y="-27" x="-57.4765625" style="" class="basic label-container"/><g transform="translate(-27.4765625, -12)" style="" class="label"><rect/><foreignObject height="24" width="54.953125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>callTool</p></span></div></foreignObject></g></g><g transform="translate(851.6015625, 60)" id="flowchart-dispose-7" class="node default"><rect height="54" width="112.65625" y="-27" x="-56.328125" style="" class="basic label-container"/><g transform="translate(-26.328125, -12)" style="" class="label"><rect/><foreignObject height="24" width="52.65625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>dispose</p></span></div></foreignObject></g></g><g transform="translate(93.71875, 214)" id="flowchart-onInit-8" class="node default"><rect height="54" width="101.4375" y="-27" x="-50.71875" style="" class="basic label-container"/><g transform="translate(-20.71875, -12)" style="" class="label"><rect/><foreignObject height="24" width="41.4375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>onInit</p></span></div></foreignObject></g></g><g transform="translate(245.84375, 214)" id="flowchart-onList-9" class="node default"><rect height="54" width="102.8125" y="-27" x="-51.40625" style="" class="basic label-container"/><g transform="translate(-21.40625, -12)" style="" class="label"><rect/><foreignObject height="24" width="42.8125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>onList</p></span></div></foreignObject></g></g><g transform="translate(683.78125, 214)" id="flowchart-onCall-10" class="node default"><rect height="54" width="104.75" y="-27" x="-52.375" style="" class="basic label-container"/><g transform="translate(-22.375, -12)" style="" class="label"><rect/><foreignObject height="24" width="44.75"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>onCall</p></span></div></foreignObject></g></g><g transform="translate(436.13671875, 214)" id="flowchart-onUpdate-11" class="node default"><rect height="54" width="129.015625" y="-27" x="-64.5078125" style="" class="basic label-container"/><g transform="translate(-34.5078125, -12)" style="" class="label"><rect/><foreignObject height="24" width="69.015625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>onUpdate</p></span></div></foreignObject></g></g><g transform="translate(851.6015625, 214)" id="flowchart-onDispose-12" class="node default"><rect height="54" width="130.890625" y="-27" x="-65.4453125" style="" class="basic label-container"/><g transform="translate(-35.4453125, -12)" style="" class="label"><rect/><foreignObject height="24" width="70.890625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>onDispose</p></span></div></foreignObject></g></g></g></g></g></svg>